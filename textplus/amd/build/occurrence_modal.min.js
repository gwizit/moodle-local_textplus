define(["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const t=e=>{try{return decodeURIComponent(Array.prototype.map.call(atob(e),function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(t){try{const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return"undefined"!=typeof TextDecoder?(new TextDecoder("utf-8")).decode(n):t}catch(e){return console.error("Base64 decode error:",t,e),"[Error decoding content]"}}},n=e=>{const n=document.getElementById("local-textplus-occurrence-modal"),o=document.getElementById("local-textplus-occurrence-modal-title"),c=document.getElementById("local-textplus-occurrence-modal-body-content"),r=t(e.getAttribute("data-context")),a=t(e.getAttribute("data-match")),l=t(e.getAttribute("data-location"));o.textContent=l,c.textContent="";const d=r.toLowerCase(),i=a.toLowerCase();let s=0,u="";for(;;){const e=d.indexOf(i,s);if(-1===e){u+=r.substring(s);break}u+=r.substring(s,e),u+="<<<HIGHLIGHT_START>>>"+r.substring(e,e+a.length)+"<<<HIGHLIGHT_END>>>",s=e+a.length}const g=u.split(/<<<HIGHLIGHT_START>>>|<<<HIGHLIGHT_END>>>/);for(let e=0;e<g.length;e++)if(e%2==1){const t=document.createElement("span");t.className="highlight",t.textContent=g[e],c.appendChild(t)}else{const t=document.createTextNode(g[e]);c.appendChild(t)}n.style.display="block"},o=()=>{document.getElementById("local-textplus-occurrence-modal").style.display="none"};e.init=()=>{const e=document.getElementById("local-textplus-occurrence-modal"),t=document.querySelector(".local-textplus-occurrence-modal-close");t&&t.addEventListener("click",()=>{o()}),document.querySelectorAll(".local-textplus-occurrence-link").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),n(e)})}),window.addEventListener("click",t=>{t.target===e&&o()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&o()})}});
